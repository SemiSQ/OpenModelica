#
# Makefile for omc
#
# $Id$
#

LIBSOCKET = @LIBSOCKET@
LIBLPSOLVE55 = @LIBLPSOLVE55@

SHELL	= /bin/sh
CC	= @CC@
CFLAGS	= $(USE_CORBA) @CFLAGS@
RMLHOME	= @rmlhome@
RMLINC  = -I$(RMLHOME)/include/plain


USE_CORBA = @USE_CORBA@

EXEEXT = @EXEEXT@

srcdir = ..
top_builddir = ../..


include $(srcdir)/Makefile.common

ifdef USE_CORBA
 CORBALIBS=@CORBALIBS@
else
 CORBALIBS=
endif

LDFLAGS = @LDFLAGS@ -lm -L$(RMLHOME)/lib/plain -lrml_g -lpthread \
  $(LIBSOCKET) $(CORBALIBS) $(LIBLPSOLVE55) \
  -L../../build/lib/omc @LIBSENDDATA_LDFLAGS@  $(SQLITE3)

PROG = omcd
RMLC	= @rmlc_bin@ -g -Wc,-O1 #-Wr,-East,-Ecps,-Efol
RML	= $(RMLHOME)/bin/rml
RMLCFLAGS = -Wr,-ftrace,$(RMLC_INCLUDE_ALL_DIRS)

MAKETARGET = Makefile
include $(srcdir)/Makefile.compiler_subdirs.common
.testvariables:
	# You're using the proper Unix Makefile. Thanks for making my life easier.

$(PROG): $(SRCO) $(SUBDIRS) $(top_builddir)/c_runtime/sendData/*.cpp
	$(CXX) $(CFLAGS) -o $(PROG)$(EXEEXT) $(SRCO) $(AST) $(RTOBJ) $(LDFLAGS) $(PLTPKGFLAGS)
