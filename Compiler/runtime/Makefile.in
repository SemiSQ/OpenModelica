#
# Makefile for Compiler/runtime
#
# $Id$
#

USE_CORBA = @USE_CORBA@

RMLINCLUDE = @rmlinc@
CFLAGS = @DEFS@ $(USE_CORBA)

ifdef USE_CORBA
  CORBASRC = omc_communication.cc omc_communication_impl.cpp Corba_rml.cpp
  CORBAINCL = @CORBACFLAGS@
  OMCCORBASRC = omc_communication.o omc_communication_impl.o Corba_omc.o
else
  CORBASRC = corbaimpl_stub.cpp
  CORBAINCL =  
  OMCCORBASRC = corbaimpl_stub_omc.o
endif

SHELL	= /bin/sh
CC	= gcc
IDL	= @IDLCMD@
CFLAGS	+=  @CFLAGS@
CXXFLAGS = $(CFLAGS)
CPPFLAGS = -I$(RMLINCLUDE) -I$(top_builddir)/c_runtime -I$(srcdir) -I. $(CORBAINCL) -Ilpsolve

include Makefile.common

config.unix.h: config.unix.h.in
	cd $(top_builddir) && ./config.status

Makefile: Makefile.in
	cd $(top_builddir) && ./config.status
