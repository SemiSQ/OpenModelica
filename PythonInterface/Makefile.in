IDLPYTHON = omniidl -bpython
LAYOUT = `test -d /etc/apt && echo --install-layout=deb`

install: setup.py OMPython/OMConfig.py OMPython/__init__.py OMPython/OMParser/__init__.py OMPython/omc_communication_idl.py
	python setup.py install $(LAYOUT) --prefix=$(top_builddir)/build

.PHONY: install

OMPython/omc_communication_idl.py : $(IDLFILE)
	$(IDLPYTHON) -COMPython $(IDLFILE)

Makefile: Makefile.in
	(cd $(top_builddir); ./config.status)
include Makefile.common
