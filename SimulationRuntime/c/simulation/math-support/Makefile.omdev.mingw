# Adrian Pop, adrpo@ida.liu.se, Martin Sj√∂lund, marsj@ida.liu.se
# - Use make -f Makefile.omdev.mingw if you want to compile on Windows/MinGW
# - Please leave the UNIX Makefile as it is if you are not using UNIX/Linux
# If you need to add files, etc, you modify Makefile.common - a common file
# for both UNIX/Linux and Windows platforms.

CC = gcc
ANSI= #-ansi
CFLAGS   := -O3 -march=native -fPIC -Wall $(ANSI) -pedantic $(EXTRA_CFLAGS) -mfpmath=sse -c -I..
CPPFLAGS :=  -Wall $(ANSI) $(EXTRA_CFLAGS) -I. -I.. -I../../ -I../solver -I../../util -I../../linearization -I../results
AR = ar -ru
FFLAGS  = -O -fexceptions

OBJS = bigden.o enorm.o hybrd1.o nelmead.o qform.o r1updt.o \
biglag.o dogleg.o fdjac1.o hybrj.o newuoa.o qrfac.o trsapp.o \
dpmpar.o hybrd.o lsame.o newuob.o r1mpyq.o update.o \
simulation_events.o ringbuffer.o simulation_delay.o simulation_init.o dgesv_aux.o \

HFILES = blaswrap.h \
matrix.h \
ringbuffer.h \
simulation_delay.h \
simulation_events.h \
simulation_init.h \


LIBS = libmath-support.a

.PHONY : libmath-support.a clean

all : libmath-support.a

libmath-support.a : $(OBJS) $(HFILES)
	$(AR) $@ $(OBJS)
	ranlib $@

clean :
	rm -f libmath-support.a
	rm -f $(OBJS)

Makefile: Makefile.in
	cd ../../../../; ./config.status

