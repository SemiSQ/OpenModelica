CC = gcc
ANSI= #-ansi
CFLAGS   := -O3 -march=native -fPIC -Wall $(ANSI) -pedantic $(EXTRA_CFLAGS)
CPPFLAGS :=  -Wall $(ANSI) $(EXTRA_CFLAGS) -I. -I.. -I../meta
AR = ar -ru
FFLAGS  = -O -fexceptions

OBJS = boolean_array.o index_spec.o integer_array.o memory_pool.o \
base_array.o real_array.o string_array.o utility.o \
modelica_string.o division.o\
java_interface.o rtclock.o 

HFILES = \
base_array.h \
boolean_array.h \
division.h \
index_spec.h \
integer_array.h \
java_interface.h \
jni.h \
jni_md.h \
jni_md_solaris.h \
jni_md_windows.h \
memory_pool.h \
modelica.h \
modelica_string.h \
real_array.h \
rtclock.h \
string_array.h \
utility.h 

LIBS = libutil.a 

.PHONY : libutil.a clean

all : libutil.a

libutil.a : $(OBJS) $(HFILES)
	$(AR) $@ $(OBJS)
	ranlib $@

clean :
	rm -f libutils.a 
	rm -f $(OBJS)

Makefile: Makefile.in
	cd ../../../; ./config.status
