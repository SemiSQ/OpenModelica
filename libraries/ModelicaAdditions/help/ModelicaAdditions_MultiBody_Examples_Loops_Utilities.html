<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>ModelicaAdditions</TITLE></HEAD>
<BODY><P>
<H2><A NAME="ModelicaAdditions.MultiBody.Examples.Loops.Utilities"></A><A HREF="ModelicaAdditions_MultiBody_Examples_Loops.html#ModelicaAdditions.MultiBody.Examples.Loops"
>ModelicaAdditions.MultiBody.Examples.Loops</A>.Utilities</H2>
<A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce"
><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForceI.png" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine"
><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.EngineI.png" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<HR>
<H2><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.EngineI.png" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine"></A><A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities"
>ModelicaAdditions.MultiBody.Examples.Loops.Utilities</A>.Engine</H2>
<IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.EngineD.png" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine">
<H3>Information</H3>
<PRE>Use the following settings:

experiment StopTime=0.2 Interval=0.002 Tolerance=1.E-8


Perform 'simulate' and then see animation in
Animation window.

  Plot the following variables:

  AngVelDegS: Angular velocity of motor shaft [rev/min]
  x         : position of cylinder [m]
  press     : pressure in cylinder [bar]
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>D</TD><TD>0.1</TD><TD>&nbsp;</TD></TR>
<TR><TD>e</TD><TD>0.05</TD><TD>&nbsp;</TD></TR>
<TR><TD>L</TD><TD>0.2</TD><TD>&nbsp;</TD></TR>
<TR><TD>Load</TD><TD>20</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> Engine 
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  <font color="blue">parameter </font>Real D=0.1;
  <font color="blue">parameter </font>Real e=0.05;
  <font color="blue">parameter </font>Real L=0.2;
  <font color="blue">parameter </font>Real Load=20;
  <font color="blue">constant </font>Real pi=Modelica.Constants.pi;
  <font color="blue">constant </font>Real PI=Modelica.Constants.pi;
  <font color="darkgreen">// Only for compatibility reasons</font>
  <font color="blue">output </font>Real AngVelDegS;
  <font color="blue">output </font>Real x;
  <font color="blue">output </font>Real press;
  <font color="blue">output </font>Real T;
  <font color="blue">output </font>Real V;
  <font color="blue">output </font>Real dens;
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.InertialSystem"
>Parts.InertialSystem</A> inertial(g=0);
  <A HREF="ModelicaAdditions_MultiBody_Joints.html#ModelicaAdditions.MultiBody.Joints.Revolute"
>Joints.Revolute</A> r1(startValueFixed=true, qd(start=-157));
  <A HREF="ModelicaAdditions_MultiBody_Joints.html#ModelicaAdditions.MultiBody.Joints.Prismatic"
>Joints.Prismatic</A> cyl(n={-1,0,0});
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.FrameTranslation"
>Parts.FrameTranslation</A> trans(r={<font color="red">sqrt</font>((D/2 + L)^2 - e^2),-e,0});
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.ShapeBody"
>Parts.ShapeBody</A> piston(
    r={0.1,0,0}, 
    m=0.3, 
    I33=0.0001, 
    Shape=&quot;cylinder&quot;, 
    Width=0.05, 
    Height=0.05);
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.ShapeBody"
>Parts.ShapeBody</A> crank(
    r={D/2,0,0}, 
    Width=0.01, 
    Height=0.01, 
    Material={0,0,1,0.5});
  <A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce"
>GasForce</A> gasForce(L=(<font color="red">sqrt</font>((L + D/2)^2 - e^2) - <font color="red">sqrt</font>((L - D/2)^2 - e^2)), d
      =0.05);
  <A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Inertia"
>Modelica.Mechanics.Rotational.Inertia</A> flyWheel(J=0.0025);
  <A HREF="../../Modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.BearingFriction"
>Modelica.Mechanics.Rotational.BearingFriction</A> torque(tau_pos=[0, Load]);
<font color="blue">equation </font>
  <font color="red">connect</font>(inertial.frame_b, r1.frame_a);
  <font color="red">connect</font>(inertial.frame_b, trans.frame_a);
  <font color="red">connect</font>(trans.frame_b, cyl.frame_a);
  <font color="red">connect</font>(cyl.frame_b, piston.frame_a);
  <font color="red">connect</font>(cyl.bearing, gasForce.flange_a);
  <font color="red">connect</font>(cyl.axis, gasForce.flange_b);
  <font color="red">connect</font>(flyWheel.flange_b, r1.axis);
  <font color="red">connect</font>(torque.flange_b, flyWheel.flange_a);
  <font color="red">connect</font>(r1.frame_b, crank.frame_a);
  <font color="darkgreen"></font>
  AngVelDegS = -r1.qd*60/(2*pi);
  <font color="darkgreen">/*rev/min*/</font>
  <font color="darkgreen"></font>
  x = gasForce.s_rel;
  press = gasForce.press;
  T = gasForce.T;
  V = gasForce.V;
  dens = gasForce.dens;
<font color="blue">end </font>Engine;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForceI.png" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce"></A><A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities"
>ModelicaAdditions.MultiBody.Examples.Loops.Utilities</A>.GasForce</H2>
<IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForceD.png" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>L</TD><TD>&nbsp;</TD><TD>Length of cylinder [m]</TD></TR>
<TR><TD>d</TD><TD>&nbsp;</TD><TD>diameter of cylinder [m]</TD></TR>
<TR><TD>k0</TD><TD>0.01</TD><TD>&nbsp;</TD></TR>
<TR><TD>k1</TD><TD>1</TD><TD>&nbsp;</TD></TR>
<TR><TD>k</TD><TD>1</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> GasForce 
  <font color="blue">extends </font><A HREF="../../Modelica/help/Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Compliant"
>Modelica.Mechanics.Translational.Interfaces.Compliant</A>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> L <font color="darkgreen">&quot;Length of cylinder&quot;</font>;
  <font color="blue">parameter </font><A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> d <font color="darkgreen">&quot;diameter of cylinder&quot;</font>;
  <font color="blue">parameter </font>Real k0=0.01;
  <font color="blue">parameter </font>Real k1=1;
  <font color="blue">parameter </font>Real k=1;
  <font color="blue">constant </font>Real pi=Modelica.Constants.pi;
  <font color="blue">constant </font>Real PI=Modelica.Constants.pi;
  <font color="darkgreen">// Only for compatibility reasons</font>
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> x;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> dens;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> press <font color="darkgreen">&quot;cylinder pressure&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Volume"
>SI.Volume</A> V;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T;
  <A HREF="../../Modelica/help/Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_rel;
<font color="blue">equation </font>
  x = 1 - s_rel/L;
  v_rel = <font color="red">der</font>(s_rel);
  <font color="darkgreen"></font>
  press = <font color="blue">if </font>v_rel &lt; 0<font color="blue"> then </font>(<font color="blue">if </font>x &lt; 0.987<font color="blue"> then </font>177.4132*x^4 - 287.2189*x^3 + 
    151.8252*x^2 - 24.9973*x + 2.4<font color="blue"> else </font>2836360*x^4 - 10569296*x^3 + 14761814*x
    ^2 - 9158505*x + 2129670)<font color="blue"> else </font>(<font color="blue">if </font>x &gt; 0.93<font color="blue"> then </font>-3929704*x^4 + 14748765*x^
    3 - 20747000*x^2 + 12964477*x - 3036495<font color="blue"> else </font>145.930*x^4 - 131.707*x^3 + 
    17.3438*x^2 + 17.9272*x + 2.4);
  <font color="darkgreen"></font>
  f = -1.0E5*press*pi*d^2/4;
  <font color="darkgreen"></font>
  V = k0 + k1*(1 - x);
  dens = 1/V;
  press*V = k*T;
<font color="blue">end </font>GasForce;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Tue Dec 10 16:34:39 2002
.
</address></BODY>
</HTML>
