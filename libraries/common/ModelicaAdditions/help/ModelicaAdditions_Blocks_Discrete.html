<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>ModelicaAdditions</TITLE></HEAD>
<BODY><P>
<H2><A NAME="ModelicaAdditions.Blocks.Discrete"></A><A HREF="ModelicaAdditions_Blocks.html#ModelicaAdditions.Blocks"
>ModelicaAdditions.Blocks</A>.Discrete</H2>
<B>Discrete input/output blocks with fixed sample period</B>
<P>
<A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.InterfacesI.png" ALT="ModelicaAdditions.Blocks.Discrete.Interfaces" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.Sampler"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.SamplerI.png" ALT="ModelicaAdditions.Blocks.Discrete.Sampler" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.ZeroOrderHold"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.ZeroOrderHoldI.png" ALT="ModelicaAdditions.Blocks.Discrete.ZeroOrderHold" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.FirstOrderHold"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.FirstOrderHoldI.png" ALT="ModelicaAdditions.Blocks.Discrete.FirstOrderHold" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.UnitDelay"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.UnitDelayI.png" ALT="ModelicaAdditions.Blocks.Discrete.UnitDelay" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.TransferFunction"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.TransferFunctionI.png" ALT="ModelicaAdditions.Blocks.Discrete.TransferFunction" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.StateSpace"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.StateSpaceI.png" ALT="ModelicaAdditions.Blocks.Discrete.StateSpace" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.TriggeredSampler"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.TriggeredSamplerI.png" ALT="ModelicaAdditions.Blocks.Discrete.TriggeredSampler" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.TriggeredMax"
><IMG SRC="ModelicaAdditions.Blocks.Discrete.TriggeredMaxI.png" ALT="ModelicaAdditions.Blocks.Discrete.TriggeredMax" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<H3>Information</H3>
<PRE></pre>
<p>
This package contains <b>discrete control blocks</b>
with <b>fixed sample period</b>.
Every component of this package is structured in the following way:
</p>

<ol>
<li> A component has <b>continuous real</b> input and output signals.</li>
<li> The <b>input</b> signals are <b>sampled</b> by the given sample period
     defined via parameter <b>samplePeriod</b>.
     The first sample instant is defined by parameter <b>startTime</b>.
<li> The <b>output</b> signals are computed from the sampled input signals.
</ol>

<p>
A <b>sampled data system</b> may consist of components of package <b>Discrete</b>
and of every other purely <b>algebraic</b> input/output block, such
as the components of packages <b>Modelica.Blocks.Math</b>,
<b>Modelica.Blocks.Nonlinear</b> or <b>Modelica.Blocks.Sources</b>.
</p>

<p>
This package contains the following components:
</p>

<pre>
   <b>Sampler</b>           Ideal sampling of continuous signals
   <b>ZeroOrderHold</b>     Zero order hold of a sampled-data system
   <b>FirstOrder</b>        Discrete-time approximation of first order system
   <b>UnitDelay</b>         Delay input signal by one sampling period
   <b>TransferFunction</b>  Discrete-time approximation of transfer function
   <b>StateSpace</b>        Discrete-time approximation of state space system
   <b>TriggeredSampler</b>  Triggered sampling of continuous signals
   <b>TriggeredMax</b>      Compute maximum, absolute value of continuous signal
                     at trigger instants
</pre>

<p>
This package is not part of the Modelica standard library, because it is
planned to realize an improved package with vectorized components (similiar
to the Modelica.Blocks.Continuous package) and
several different ways to define the sample period. Especially,
the sample period may optionally be defined via an outer parameter in a
higher level.
This features cannot be provided in a satisfactory way in Modelica version 1.3,
due to some missing properties of the replaceable attribute.
</p>

<dl>
<dt><b>Main Author:</b>
<dd><a href="http://www.robotic.dlr.de/Martin.Otter/">Martin Otter</a><br>
    Deutsches Zentrum f&uuml;r Luft und Raumfahrt e.V. (DLR)<br>
    Institut f&uuml;r Robotik und Mechatronik<br>
    Postfach 1116<br>
    D-82230 Wessling<br>
    Germany<br>
    email: <A HREF="mailto:Martin.Otter@dlr.de">Martin.Otter@dlr.de</A><br>
</dl>
<br>

<p><b>Release Notes:</b></p>
<ul>
<li><i>October 21, 2002</i>
       by <a href="http://www.robotic.dlr.de/Martin.Otter/">Martin Otter</a>:<br>
       New components TriggeredSampler and TriggeredMax added.</li>
<li><i>June 18, 2000</i>
       by <a href="http://www.robotic.dlr.de/Martin.Otter/">Martin Otter</a>:<br>
       Realized based on a corresponding library of Dieter Moormann and
       Hilding Elmqvist.</li>
</ul>
<br>

<p><b>Copyright &copy; 2000-2002, DLR.</b></p>

<p><i>
The Discrete package is <b>free</b> software;
it can be redistributed and/or modified
under the terms of the <b>Modelica license</b>, see the license conditions
and the accompanying <b>disclaimer</b> in the documentation of package
Modelica in file "Modelica/package.mo".
</i></p>
<pre>
</PRE><P>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.SamplerI.png" ALT="ModelicaAdditions.Blocks.Discrete.Sampler" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.Sampler"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.Sampler</H2>
<B>Ideal sampling of continuous signals</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.SamplerD.png" ALT="ModelicaAdditions.Blocks.Discrete.Sampler">
<H3>Information</H3>
<PRE></pre>
<p>
Samples the continues input signals with a sampling rate defined
via parameter <b>samplePeriod</b>.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>n</TD><TD>1</TD><TD>Number of inputs (= number of outputs)</TD></TR>
<TR><TD>samplePeriod</TD><TD>0.1</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Sampler <font color="darkgreen">&quot;Ideal sampling of continuous signals&quot;</font> 
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteMIMOs"
>Interfaces.DiscreteMIMOs</A>;
  <font color="darkgreen"></font>
<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y = u;
  <font color="blue">end when</font>;
<font color="blue">end </font>Sampler;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.ZeroOrderHoldI.png" ALT="ModelicaAdditions.Blocks.Discrete.ZeroOrderHold" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.ZeroOrderHold"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.ZeroOrderHold</H2>
<B>Zero order hold of a sampled-data system</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.ZeroOrderHoldD.png" ALT="ModelicaAdditions.Blocks.Discrete.ZeroOrderHold">
<H3>Information</H3>
<PRE></pre>
<p>
The output is identical to the sampled input signal at sample
time instants and holds the output at the value of the last
sample instant during the sample points.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>n</TD><TD>1</TD><TD>Number of inputs (= number of outputs)</TD></TR>
<TR><TD>samplePeriod</TD><TD>0.1</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ZeroOrderHold <font color="darkgreen">&quot;Zero order hold of a sampled-data system&quot;</font> 
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteMIMOs"
>Interfaces.DiscreteMIMOs</A>;
<font color="blue">protected </font>
  Real ySample[n];
<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    ySample = u;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* Define y=ySample with an infinitesimal delay to break potential
       algebraic loops if both the continuous and the discrete part have
       direct feedthrough
    */</font>
  y = <font color="red">pre</font>(ySample);
<font color="blue">end </font>ZeroOrderHold;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.FirstOrderHoldI.png" ALT="ModelicaAdditions.Blocks.Discrete.FirstOrderHold" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.FirstOrderHold"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.FirstOrderHold</H2>
<B>First order hold of a sampled-data system</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.FirstOrderHoldD.png" ALT="ModelicaAdditions.Blocks.Discrete.FirstOrderHold">
<H3>Information</H3>
<PRE></pre>
<p>
The output signal is the extrapolation through the
values of the last two sampled input signals.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>n</TD><TD>1</TD><TD>Number of inputs (= number of outputs)</TD></TR>
<TR><TD>samplePeriod</TD><TD>0.1</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> FirstOrderHold <font color="darkgreen">&quot;First order hold of a sampled-data system&quot;</font> 
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteMIMOs"
>Interfaces.DiscreteMIMOs</A>;
<font color="blue">protected </font>
  Real ySample[n];
  Real tSample;
  Real c[n];
<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    ySample = u;
    tSample = time;
    c = <font color="blue">if </font>firstTrigger<font color="blue"> then </font><font color="red">zeros</font>(n)<font color="blue"> else </font>(ySample - <font color="red">pre</font>(ySample))/
      samplePeriod;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* Use pre(ySample) and pre(c) to break potential algebraic loops by an
       infinitesimal delay if both the continuous and the discrete part
       have direct feedthrough.
    */</font>
  y = <font color="red">pre</font>(ySample) + <font color="red">pre</font>(c)*(time - tSample);
<font color="blue">end </font>FirstOrderHold;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.UnitDelayI.png" ALT="ModelicaAdditions.Blocks.Discrete.UnitDelay" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.UnitDelay"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.UnitDelay</H2>
<B>Unit Delay Block</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.UnitDelayD.png" ALT="ModelicaAdditions.Blocks.Discrete.UnitDelay">
<H3>Information</H3>
<PRE></pre>
<p>
This block describes a unit delay:
</p>

<pre>
          1
     y = --- * u
          z
</pre>

<p>
that is, the output signal y is the input signal u of the
previous sample instant. Before the second sample instant,
the output y is identical to parameter yStart.
</p>

<p><b>Release Notes:</b></p>
<ul>
<li><i>June 13, 2000</i>
       by <a href="http://www.robotic.dlr.de/Martin.Otter/">Martin Otter</a>:<br>
       Realized, based on a model of Dieter Moormann.
</li>
</ul>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>yStart[:]</TD><TD>{0}</TD><TD>Initial values of output signals</TD></TR>
<TR><TD>samplePeriod</TD><TD>0.1</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> UnitDelay <font color="darkgreen">&quot;Unit Delay Block&quot;</font> 
  <font color="blue">parameter </font>Real yStart[:]={0} <font color="darkgreen">&quot;Initial values of output signals&quot;</font>;
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteMIMOs"
>Interfaces.DiscreteMIMOs</A>(
    <font color="blue">final </font>n=<font color="red">size</font>(yStart, 1), 
    y(<font color="blue">final </font>start=yStart), 
    outPort(signal(start=yStart)));
  <font color="darkgreen"></font>
<font color="blue">protected </font>
  Real yTemp[n](start=yStart);
<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    yTemp = u;
  <font color="blue">end when</font>;
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y = <font color="red">pre</font>(yTemp);
  <font color="blue">end when</font>;
<font color="blue">end </font>UnitDelay;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.TransferFunctionI.png" ALT="ModelicaAdditions.Blocks.Discrete.TransferFunction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.TransferFunction"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.TransferFunction</H2>
<B>Discrete Transfer Function block</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.TransferFunctionD.png" ALT="ModelicaAdditions.Blocks.Discrete.TransferFunction">
<H3>Information</H3>
<PRE></pre>
<p>The <b>discrete transfer function</b> block defines the
transfer function between the input signal u and the output
signal y. The numerator has the order nb-1, the denominator
has the order na-1.</p>

<pre>          b(1)*z^(nb-1) + b(2)*z^(nb-2) + ... + b(nb)
   y(z) = -------------------------------------------- * u(z)
          a(1)*z^(na-1) + a(2)*z^(na-2) + ... + a(na)
</pre>

<p>State variables <b>x</b> are defined according to
<b>controller canonical</b> form. Initial values of the
states can be set as start values of <b>x</b>.<p>

<p>Example:</p>

<pre>     Blocks.Discrete.TransferFunction g(b = {2,4}, a = {1,3});
</pre>

<p>results in the following transfer function:</p>

<pre>        2*z + 4
   y = --------- * u
         z + 3
</pre>

<p><b>Release Notes:</b></p>

<ul>
<li><i>November 15, 2000</i>
    by <a href="http://www.dynasim.se">Hans Olsson</a>:<br>
    Converted to when-semantics of Modelica 1.4 with special
    care to avoid unnecessary algebraic loops.</li>
<li><i>June 18, 2000</i>
    by <a href="http://www.robotic.dlr.de/Martin.Otter/">Martin Otter</a>:<br>
    Realized based on a corresponding model of Dieter Moormann
    and Hilding Elmqvist.</li>
</ul>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>b[:]</TD><TD>{1}</TD><TD>Numerator coefficients of transfer function.</TD></TR>
<TR><TD>a[:]</TD><TD>{1,1}</TD><TD>Denominator coefficients of transfer function.</TD></TR>
<TR><TD>samplePeriod</TD><TD>0.1</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TransferFunction <font color="darkgreen">&quot;Discrete Transfer Function block&quot;</font> 
  <font color="blue">parameter </font>Real b[:]={1} <font color="darkgreen">&quot;Numerator coefficients of transfer function.&quot;</font>;
  <font color="blue">parameter </font>Real a[:]={1,1} <font color="darkgreen">&quot;Denominator coefficients of transfer function.&quot;</font>;
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A>;
  <font color="blue">output </font>Real x[<font color="red">size</font>(a, 1) - 1] <font color="darkgreen">
    &quot;State of transfer function from controller canonical form&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer nb=<font color="red">size</font>(b, 1) <font color="darkgreen">&quot;Size of Numerator of transfer function&quot;</font>;
  <font color="blue">parameter </font>Integer na=<font color="red">size</font>(a, 1) <font color="darkgreen">&quot;Size of Denominator of transfer function&quot;</font>;
  Real x1;
  Real xext[<font color="red">size</font>(a, 1)];
<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    <font color="darkgreen">/* State variables x are defined according to
       controller canonical form. */</font>
    x1 = (u - a[2:<font color="red">size</font>(a, 1)]*<font color="red">pre</font>(x))/a[1];
    xext = <font color="red">vector</font>([x1; <font color="red">pre</font>(x)]);
    x = xext[1:<font color="red">size</font>(x, 1)];
    y = <font color="red">vector</font>([<font color="red">zeros</font>(na - nb, 1); b])*xext;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* This is a non-sampled equation and above there are two separate
       when-clauses. This breaks feeback loops without direct terms,
       since in that case y will be independent of x1 (and only dependent
       on pre(x)).
    */</font>
  <font color="darkgreen">/* Corresponding (simpler) version using when-semantics of Modelica 1.3:
   equation
     when sampleTrigger then
      [x; xn] = [x1; pre(x)];
      [u] = transpose([a])*[x1; pre(x)];
      [y] = transpose([zeros(na - nb, 1); b])*[x1; pre(x)];
     end when;
*/</font>
<font color="blue">end </font>TransferFunction;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.StateSpaceI.png" ALT="ModelicaAdditions.Blocks.Discrete.StateSpace" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.StateSpace"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.StateSpace</H2>
<B>Discrete State Space block</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.StateSpaceD.png" ALT="ModelicaAdditions.Blocks.Discrete.StateSpace">
<H3>Information</H3>
<PRE></pre>
<p>
The <b>discrete state space</b> block defines the relation
between the input u=inPort.signal and the output
y=outPort.signal in state space form:
</p>

<pre>
    x = A * pre(x) + B * u
    y = C * pre(x) + D * u
</pre>

<p>
where pre(x) is the value of the discrete state x at
the previous sample time instant.
The input is a vector of length nu, the output is a vector
of length ny and nx is the number of states. Accordingly
</p>
<pre>
        A has the dimension: A(nx,nx),
        B has the dimension: B(nx,nu),
        C has the dimension: C(ny,nx),
        D has the dimension: D(ny,nu)
</pre>

<p>
Example:
</p>
<pre>
     parameter: A = [0.12, 2;3, 1.5]
     parameter: B = [2, 7;3, 1]
     parameter: C = [0.1, 2]
     parameter: D = zeros(ny,nu)
results in the following equations:

  [x[1]]   [0.12  2.00] [pre(x[1])]   [2.0  7.0] [u[1]]
  [    ] = [          ]*[         ] + [        ]*[    ]
  [x[2]]   [3.00  1.50] [pre(x[2])]   [0.1  2.0] [u[2]]

                             [pre(x[1])]            [u[1]]
       y[1]   = [0.1  2.0] * [         ] + [0  0] * [    ]
                             [pre(x[2])]            [u[2]]
</pre>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>A[:, size(A, 1)]</TD><TD>[1, 0; 0, 1]</TD><TD>Matrix A of state space model</TD></TR>
<TR><TD>B[size(A, 1), :]</TD><TD>[1; 1]</TD><TD>Matrix B of state space model</TD></TR>
<TR><TD>C[:, size(A, 1)]</TD><TD>[1, 1]</TD><TD>Matrix C of state space model</TD></TR>
<TR><TD>D[size(C, 1), size(B, 2)]</TD><TD>zeros(size(C, 1), size(B, 2))</TD><TD>Matrix D of state space model</TD></TR>
<TR><TD>samplePeriod</TD><TD>0.1</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> StateSpace <font color="darkgreen">&quot;Discrete State Space block&quot;</font> 
  <font color="blue">parameter </font>Real A[:, <font color="red">size</font>(A, 1)]=[1, 0; 0, 1] <font color="darkgreen">&quot;Matrix A of state space model&quot;</font>;
  <font color="blue">parameter </font>Real B[<font color="red">size</font>(A, 1), :]=[1; 1] <font color="darkgreen">&quot;Matrix B of state space model&quot;</font>;
  <font color="blue">parameter </font>Real C[:, <font color="red">size</font>(A, 1)]=[1, 1] <font color="darkgreen">&quot;Matrix C of state space model&quot;</font>;
  <font color="blue">parameter </font>Real D[<font color="red">size</font>(C, 1), <font color="red">size</font>(B, 2)]=<font color="red">zeros</font>(<font color="red">size</font>(C, 1), <font color="red">size</font>(B, 2)) <font color="darkgreen">
    &quot;Matrix D of state space model&quot;</font>;
  <font color="darkgreen"></font>
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteMIMO"
>Interfaces.DiscreteMIMO</A>(<font color="blue">final </font>nin=<font color="red">size</font>(B, 2), <font color="blue">final </font>nout=<font color="red">size</font>(C, 1));
  <font color="blue">output </font>Real x[<font color="red">size</font>(A, 1)] <font color="darkgreen">&quot;State vector&quot;</font>;
  <font color="darkgreen"></font>
<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    x = A*<font color="red">pre</font>(x) + B*u;
    y = C*<font color="red">pre</font>(x) + D*u;
  <font color="blue">end when</font>;
<font color="blue">end </font>StateSpace;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.TriggeredSamplerI.png" ALT="ModelicaAdditions.Blocks.Discrete.TriggeredSampler" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.TriggeredSampler"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.TriggeredSampler</H2>
<B>Triggered sampling of continuous signals</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.TriggeredSamplerD.png" ALT="ModelicaAdditions.Blocks.Discrete.TriggeredSampler">
<H3>Information</H3>
<PRE></pre>
<p>
Samples the continuous input signals whenever the trigger input
signal is rising (i.e., trigger.signal[1] changes from <b>false</b> to
<b>true</b>) and provides the sampled input signals as outputs.
Before the first sampling, the output signals are equal to
their initial values defined via parameter <b>y0</b>.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>n</TD><TD>1</TD><TD>number of input signals (= number output signals)</TD></TR>
<TR><TD>replaceable type SignalType</TD><TD> Real</TD><TD>type of input and output signal</TD></TR>
<TR><TD>y0[n]</TD><TD>zeros(n)</TD><TD>initial values of output signals</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TriggeredSampler <font color="darkgreen">&quot;Triggered sampling of continuous signals&quot;</font> 
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteBlockIcon"
>Interfaces.DiscreteBlockIcon</A>;
  <font color="blue">parameter </font>Integer n=1 <font color="darkgreen">&quot;number of input signals (= number output signals)&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">type</font> SignalType = Real <font color="darkgreen">&quot;type of input and output signal&quot;</font>;
  <font color="blue">parameter </font><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete.TriggeredSampler.SignalType"
>SignalType</A> y0[n]=<font color="red">zeros</font>(n) <font color="darkgreen">&quot;initial values of output signals&quot;</font>;
  <font color="darkgreen"></font>
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.InPort"
>Modelica.Blocks.Interfaces.InPort</A> inPort(<font color="blue">final </font>n=n, <font color="blue">redeclare </font><font color="blue">type</font> 
      SignalType = SignalType) <font color="darkgreen">
    &quot;Connector with an input signal of type SignalType&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.OutPort"
>Modelica.Blocks.Interfaces.OutPort</A> outPort(
    <font color="blue">final </font>n=n, 
    <font color="blue">redeclare </font><font color="blue">type</font> SignalType = SignalType, 
    signal(start=y0, fixed=<font color="red">fill</font>(true, n))) <font color="darkgreen">
    &quot;Connector with an output signal of type SignalType&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> trigger(<font color="blue">final </font>n=1);
<font color="blue">equation </font>
  <font color="blue">when </font>trigger.signal[1]<font color="blue"> then</font>
    outPort.signal = inPort.signal;
  <font color="blue">end when</font>;
<font color="blue">end </font>TriggeredSampler;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.Blocks.Discrete.TriggeredMaxI.png" ALT="ModelicaAdditions.Blocks.Discrete.TriggeredMax" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.Blocks.Discrete.TriggeredMax"></A><A HREF="ModelicaAdditions_Blocks_Discrete.html#ModelicaAdditions.Blocks.Discrete"
>ModelicaAdditions.Blocks.Discrete</A>.TriggeredMax</H2>
<B>Compute maximum, absolute value of continuous signal at trigger instants</B><p>
<IMG SRC="ModelicaAdditions.Blocks.Discrete.TriggeredMaxD.png" ALT="ModelicaAdditions.Blocks.Discrete.TriggeredMax">
<H3>Information</H3>
<PRE></pre>
<p>
Samples the continuous input signals whenever the trigger input
signal is rising (i.e., trigger.signal[1] changes from <b>false</b> to
<b>true</b>). The maximum, absolute values of the inputs signals
at the sampling point are provided as output signals.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>n</TD><TD>1</TD><TD>number of input signals (= number output signals)</TD></TR>
<TR><TD>replaceable type SignalType</TD><TD> Real</TD><TD>type of input and output signal</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TriggeredMax <font color="darkgreen">
  &quot;Compute maximum, absolute value of continuous signal at trigger instants&quot;</font>
   
  <font color="darkgreen"></font>
  <font color="blue">extends </font><A HREF="ModelicaAdditions_Blocks_Discrete_Interfaces.html#ModelicaAdditions.Blocks.Discrete.Interfaces.DiscreteBlockIcon"
>Interfaces.DiscreteBlockIcon</A>;
  <font color="blue">parameter </font>Integer n=1 <font color="darkgreen">&quot;number of input signals (= number output signals)&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">type</font> SignalType = Real <font color="darkgreen">&quot;type of input and output signal&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.InPort"
>Modelica.Blocks.Interfaces.InPort</A> inPort(<font color="blue">final </font>n=n, <font color="blue">redeclare </font><font color="blue">type</font> 
      SignalType = SignalType) <font color="darkgreen">
    &quot;Connector with an input signal of type SignalType&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.OutPort"
>Modelica.Blocks.Interfaces.OutPort</A> outPort(
    <font color="blue">final </font>n=n, 
    <font color="blue">redeclare </font><font color="blue">type</font> SignalType = SignalType, 
    signal(<font color="blue">each </font>start=0, <font color="blue">each </font>fixed=true)) <font color="darkgreen">
    &quot;Connector with an output signal of type SignalType&quot;</font>;
  <A HREF="../../Modelica/help/Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInPort"
>Modelica.Blocks.Interfaces.BooleanInPort</A> trigger(<font color="blue">final </font>n=1);
<font color="blue">equation </font>
  <font color="blue">when </font>trigger.signal[1]<font color="blue"> then</font>
    <font color="blue">for </font>i<font color="blue"> in </font>1:n<font color="blue"> loop</font>
      outPort.signal[i] = <font color="red">max</font>(<font color="red">pre</font>(outPort.signal[i]), <font color="red">abs</font>(inPort.signal[i]));
    <font color="blue">end for</font>;
  <font color="blue">end when</font>;
<font color="blue">end </font>TriggeredMax;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Tue Dec 10 16:33:20 2002
.
</address></BODY>
</HTML>
