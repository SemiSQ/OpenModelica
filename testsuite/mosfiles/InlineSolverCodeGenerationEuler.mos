// name:     InlineSolverCodeGenerationEuler
// keywords: events
// status: correct
// teardown_command: rm -rf DerivativeCodeGeneration_* DerivativeCodeGeneration DerivativeCodeGeneration.exe DerivativeCodeGeneration.cpp DerivativeCodeGeneration.makefile DerivativeCodeGeneration.libs DerivativeCodeGeneration.log output.log
//
// Tests code generation for the inline euler solver. Uses a model designed to create every equation block that omc generates $DER crefs for.
// 

loadFile("DerivativeCodeGeneration.mo");
simulate(DerivativeCodeGeneration,method="inline-euler",stopTime=4.0,numberOfIntervals=1000);
getErrorString();
"x[1]";
val(x[1],0.0);val(x[1],1.0);val(x[1],2.0);
"x[2]";
val(x[2],0.0);val(x[2],1.0);val(x[2],2.0);
"mixed.v1";
val(mixed.v1,0.0);val(mixed.v1,1.0);val(mixed.v1,2.0);
"y";
val(y,0.0);val(y,1.0);val(y,2.0);
"z";
val(z,0.0);val(z,1.0);val(z,2.0);

// Result:
// true
// record SimulationResult
//     resultFile = "DerivativeCodeGeneration_res.mat",
//     simulationOptions = "startTime = 0.0, stopTime = 4.0, numberOfIntervals = 1000, tolerance = 0.000001, method = 'inline-euler', fileNamePrefix = 'DerivativeCodeGeneration', storeInTemp = false, noClean = false, options = '', outputFormat = 'mat', variableFilter = '.*', measureTime = false, cflags = '', simflags = ''",
//     messages = ""
// end SimulationResult;
// ""
// "x[1]"
// 0.0
// 1.0
// 2.0
// "x[2]"
// 0.0
// 2.0
// 4.0
// "mixed.v1"
// 0.0
// -0.44099782257443465
// -0.7487867783249799
// "y"
// 2.0
// 3.0000000000000004
// 4.000000000000001
// "z"
// 15.0
// 15.502
// 17.003999999999998
// endResult
